sudo: false
language: python
cache: pip
python:
  - "3.6"
  - "3.5"
env:
  - BASEDIR="https://raw.githubusercontent.com/open-contracting/standard-maintenance-scripts/master"
install:
  - curl -s -S --retry 3 $BASEDIR/tests/install.sh | bash -
  - pip install .[test]
  - pip install -e git+https://github.com/OpenDataServices/flatten-tool.git@v0.7.0#egg=flattentool
  - pip install -e git+https://github.com/OpenDataServices/lib-cove.git@v0.7.0#egg=libcove
script:
  - curl -s -S --retry 3 $BASEDIR/tests/script.sh | bash -
  - pytest --cov libcoveoc4ids
after_success:
  coveralls
